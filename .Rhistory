```
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
library(sjPlot)
library(dplyr)
library(tidyr)
library(lavaan)
library(stargazer)
library(corrplot)
library(psych)
library(knitr)
library(kableExtra)
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
library(summarytools)
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
library(summarytools)
getOption("repo")
getOption("repos")
print(dfSummary(dat04b, valid.col = FALSE),
method = "render")
print(dfSummary(dat04b, plain.ascii = FALSE, style = "grid",
graph.magnif = 0.75, na.col=F, valid.col = FALSE,varnumbers = F),
max.tbl.height = 300, method = "render")
# Chunk 2
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
# Chunk 3
getOption("repos")
# Chunk 4
library(sjPlot)
library(dplyr)
library(tidyr)
library(lavaan)
library(stargazer)
library(corrplot)
library(psych)
library(knitr)
library(kableExtra)
library(summarytools)
library(sjlabelled)
library(Hmisc)
# Chunk 5
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
# Chunk 6
dat04 <- w01 %>% filter(Intro==1) %>%
select(starts_with("meritv01"),
starts_with("meritv02"),
starts_with("meritv03_p"),
starts_with("FL_21_DO"))
dat04$grupo <- NA
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v01==1] <- 1
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v02==1] <- 2
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v03==1] <- 3
dat04$perc_effort <- rowSums(dat04[,c(matches(match = "perc_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_talent <- rowSums(dat04[,c(matches(match = "perc_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_wpart  <- rowSums(dat04[,c(matches(match = "perc_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$perc_netw   <- rowSums(dat04[,c(matches(match = "perc_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_effort <- rowSums(dat04[,c(matches(match = "pref_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_talent <- rowSums(dat04[,c(matches(match = "pref_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_wpart  <- rowSums(dat04[,c(matches(match = "pref_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_netw   <- rowSums(dat04[,c(matches(match = "pref_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04[dat04==0] <- NA
# Chunk 7
dat04$perc_effort <- set_labels(dat04$perc_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_talent <- set_labels(dat04$perc_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_wpart <- set_labels(dat04$perc_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_netw <- set_labels(dat04$perc_netw,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_effort <- set_labels(dat04$pref_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_talent <- set_labels(dat04$pref_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_wpart <- set_labels(dat04$pref_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_netw <- set_labels(dat04$pref_netw,  labels = c("strongly disagree", "disagreement", "Neither agree nor disagree","Agree", "totally agree"))
# Chunk 8
dat04b <-  dat04 %>% select(perc_effort, perc_talent, perc_wpart, perc_netw, pref_effort, pref_talent, pref_wpart , pref_netw) %>% as.data.frame()
dat04b <- mutate(dat04b, perc_effort = recode(dat04b$perc_effort, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they manage to get bigger
rewards that those who strive
less."
dat04b <- mutate(dat04b, perc_talent = recode(dat04b$perc_talent, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they manage to obtain
greater rewards than those who possess
less talent."
dat04b <- mutate(dat04b, perc_wpart = recode(dat04b$perc_wpart, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have rich parents manage to get out
ahead."
dat04b <- mutate(dat04b, perc_netw = recode(dat04b$perc_netw, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have good contacts they manage to get out
ahead."
dat04b <- mutate(dat04b, pref_effort = recode(dat04b$pref_effort, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they should get
greater rewards than those who
they try less."
dat04b <- mutate(dat04b, pref_talent = recode(dat04b$pref_talent, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they should get
greater rewards than those who possess
less talent."
dat04b <- mutate(dat04b, pref_wpart = recode(dat04b$pref_wpart, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dat04b <- mutate(dat04b, pref_netw = recode(dat04b$pref_netw, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dfSummary(dat04b, plain.ascii = FALSE, style = "grid",
graph.magnif = 0.75, na.col=F, valid.col = FALSE,varnumbers = F, tmp.img.dir = "/tmp")
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
setwd("~/GitHub/merit-scale")
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
library(sjPlot)
library(dplyr)
library(tidyr)
library(lavaan)
library(stargazer)
library(corrplot)
library(psych)
library(knitr)
library(kableExtra)
library(summarytools)
library(sjlabelled)
library(Hmisc)
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
dat04 <- w01 %>% filter(Intro==1) %>%
select(starts_with("meritv01"),
starts_with("meritv02"),
starts_with("meritv03_p"),
starts_with("FL_21_DO"))
dat04$grupo <- NA
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v01==1] <- 1
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v02==1] <- 2
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v03==1] <- 3
dat04$perc_effort <- rowSums(dat04[,c(matches(match = "perc_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_talent <- rowSums(dat04[,c(matches(match = "perc_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_wpart  <- rowSums(dat04[,c(matches(match = "perc_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$perc_netw   <- rowSums(dat04[,c(matches(match = "perc_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_effort <- rowSums(dat04[,c(matches(match = "pref_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_talent <- rowSums(dat04[,c(matches(match = "pref_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_wpart  <- rowSums(dat04[,c(matches(match = "pref_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_netw   <- rowSums(dat04[,c(matches(match = "pref_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04[dat04==0] <- NA
dat04$perc_effort <- set_labels(dat04$perc_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_talent <- set_labels(dat04$perc_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_wpart <- set_labels(dat04$perc_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$perc_netw <- set_labels(dat04$perc_netw,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_effort <- set_labels(dat04$pref_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_talent <- set_labels(dat04$pref_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_wpart <- set_labels(dat04$pref_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
dat04$pref_netw <- set_labels(dat04$pref_netw,  labels = c("strongly disagree", "disagreement", "Neither agree nor disagree","Agree", "totally agree"))
dat04b <-  dat04 %>% select(perc_effort, perc_talent, perc_wpart, perc_netw, pref_effort, pref_talent, pref_wpart , pref_netw) %>% as.data.frame()
dat04b <- mutate(dat04b, perc_effort = recode(dat04b$perc_effort, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they manage to get bigger
rewards that those who strive
less."
dat04b <- mutate(dat04b, perc_talent = recode(dat04b$perc_talent, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they manage to obtain
greater rewards than those who possess
less talent."
dat04b <- mutate(dat04b, perc_wpart = recode(dat04b$perc_wpart, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have rich parents manage to get out
ahead."
dat04b <- mutate(dat04b, perc_netw = recode(dat04b$perc_netw, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$perc_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have good contacts they manage to get out
ahead."
dat04b <- mutate(dat04b, pref_effort = recode(dat04b$pref_effort, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they should get
greater rewards than those who
they try less."
dat04b <- mutate(dat04b, pref_talent = recode(dat04b$pref_talent, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they should get
greater rewards than those who possess
less talent."
dat04b <- mutate(dat04b, pref_wpart = recode(dat04b$pref_wpart, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dat04b <- mutate(dat04b, pref_netw = recode(dat04b$pref_netw, "1" = "Strongly disagree", "2" = "Disagreement", "3" = "Neither agree nor disagree", "4" = "Agree", "5" = "Totally agree"))
label(dat04b$pref_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dfSummary(dat04b, plain.ascii = FALSE, style = "grid",
graph.magnif = 0.75, na.col=F, valid.col = FALSE,varnumbers = F, tmp.img.dir = "/tmp")
print(dfSummary(dat04b, na.col=F,varnumbers = F ,valid.col = FALSE, graph.magnif = 0.75),
max.tbl.height = 300, method = "render")
print(dfSummary(dat04b, graph.magnif = 1, na.col=F,varnumbers = F ,valid.col = FALSE), method = 'render')
dat01 <- data01 %>% filter(grupo==1) %>%  na.omit()
dat01 <- dat04 %>% filter(grupo==1) %>%  na.omit()
dat04$order<-dat04$grupo
sjPlot::view_df(w01)
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01$Intro <- set_labels(w01$Intro,  labels = c("I ACCEPT take part in this investigation", "I NOT ACCEPT take part in this investigation"))
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE) method = 'render')
w01a <- filter(w01,Intro==1) # Elimina los que no aceptan
print(freq(w01a$Intro), method = 'render')
# Variables para ver si finalizo encuesta
table(w01a$Finished,exclude=NULL) # (1) 2100 finalizan, (0) 136 no terminan
w01b <- filter(w01a,Finished==1) # Elimina los que no aceptan
table(w01b$Intro,exclude=NULL) # 2100
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I ACCEPT take part in this investigation", "2" = "I NOT ACCEPT take part in this investigation"))
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
w01a <- filter(w01,Intro=="I ACCEPT take part in this investigation") # Elimina los que no aceptan
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
w01a <- filter(w01,Intro=="I ACCEPT take part in this investigation") # Elimina los que no aceptan
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
w01a <- filter(w01,Intro=="I_ACCEPT") # Elimina los que no aceptan
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
# Variables para ver si finalizo encuesta
table(w01a$Finished,exclude=NULL) # (1) 2100 finalizan, (0) 136 no terminan
w01b <- filter(w01a,Finished==1) # Elimina los que no aceptan
table(w01b$Intro,exclude=NULL) # 2100
w01a <- filter(w01,Intro=="I_ACCEPT") # Elimina los que no aceptan
table(w01$Intro)
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
table(w01$Intro)
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
w01$Intro <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
table(w01$Intro)
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
w01 <- mutate(w01, Intro = recode(w01$Intro, "I_ACCEPT" = "1", "I_ACCEPT" = "2"))
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01 <- mutate(w01, Intro = recode(w01$Intro, "I_ACCEPT" = "1", "I_ACCEPT" = "2"))
w01a <- filter(w01,Intro=="I_ACCEPT") # Elimina los que no aceptan
table(w01$Intro)
table(w01$Intro)
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
w01 <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
table(w01$Intro)
print(freq(w01$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
w01a <- filter(w01,Intro=="I_ACCEPT") # Elimina los que no aceptan
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
w01a <- w01 %>% filter(Intro=="I_ACCEPT") %>% as.data.frame() # Elimina los que no aceptan
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE, display.labels =T), method = 'render')
print(freq(w01a$Intro, report.nas = FALSE, totals = FALSE,
cumul = FALSE, headings = FALSE), method = 'render')
print(dfSummary(w01$Intro, valid.col = FALSE, graph.magnif = 0.75), method = "render")
print(dfSummary(w01$Intro, valid.col = FALSE, graph.magnif = 0.75), method = "render")
w01a <- w01a %>% filter(Intro=="I_ACCEPT") %>% as.data.frame() # Elimina los que no aceptan
print(dfSummary(w01a$Intro, valid.col = FALSE, graph.magnif = 0.75), method = "render")
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01a <- as.character(mutate(w01, Intro_char = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT")))
print(dfSummary(w01$Intro_char, valid.col = FALSE, graph.magnif = 0.75), method = "render")
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01$Intro_char <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
print(dfSummary(w01$Intro_char, valid.col = FALSE, graph.magnif = 0.75), method = "render")
w01a <- w01a %>% filter(Intro==1) %>% as.data.frame() # Elimina los que no aceptan
print(dfSummary(w01a$Intro, valid.col = FALSE, graph.magnif = 0.75), method = "render")
print(dfSummary(w01$Intro, valid.col = FALSE, graph.magnif = 0.75), method = "render")
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01$Intro_char <- mutate(w01, Intro = recode(w01$Intro, "1" = "I_ACCEPT", "2" = "I_NOT_ACCEPT"))
print(dfSummary(w01$Intro_char, valid.col = FALSE, graph.magnif = 0.75), method = "render")
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
label(w01$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w01$Intro <- set_labels(w01$Intro,  labels = c("I ACCEPT take part in this investigation","I NOT ACCEPT take part in this investigation." ))
print(sjPlot::view_df(w01$Intro, show.type = T,show.frq = T, show.string.values = T))
w01_Intro<- as.data.framew01a$Intro)
w01_Intro<- as.data.frame(w01a$Intro)
print(sjPlot::view_df(w01$Intro, show.type = T,show.frq = T, show.string.values = T))
w01_Intro <- w01 %>% select(Intro,Finished) %>% as.data.frame()
print(sjPlot::view_df(w01$Intro, show.type = T,show.frq = T, show.string.values = T))
print(sjPlot::view_df(w01$Intro, show.type = T,show.frq = T, show.string.values = T))
print(sjPlot::view_df(w01_Intro, show.type = T,show.frq = T, show.string.values = T))
w01$Intro <- set_labels(w01$Intro,  labels = c("(1) I ACCEPT take part in this investigation","(2) I NOT ACCEPT take part in this investigation."))
w01_Intro <- w01 %>% select(Intro,Finished) %>% as.data.frame()
print(sjPlot::view_df(w01_Intro, show.type = T,show.frq = T, show.string.values = T))
w01$Intro <- set_labels(w01$Intro,  labels = c("I ACCEPT take part in this investigation","I NOT ACCEPT take part in this investigation."))
table(w01$Intro)
w02b$Intro <- set_labels(w02b$Intro,  labels = c("I ACCEPT take part in this investigation", "I NOT ACCEPT take part in this investigation."))
w02b <- w02 %>% filter(Intro==1, Finished==1) %>% as.data.frame()
w02 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola2.sav",verbose = F)
label(w02$Intro) <- "If you wish to participate, select the alternative I ACCEPT take part in this investigation. If you do not want to participate in this study, press the alternative I NOT ACCEPT take part in this investigation."
w02$Intro <- set_labels(w02$Intro,  labels = c("I ACCEPT take part in this investigation","I NOT ACCEPT take part in this investigation."))
w02_Intro <- w02 %>% select(Intro,Finished) %>% as.data.frame()
sjPlot::view_df(w02_Intro, show.type = T,show.frq = T, show.string.values = T, verbose = F, show.id = F)
w02_Intro <- w02 %>% select(Intro,Finished) %>% as.data.frame()
sjPlot::view_df(w02_Intro, show.type = T,show.frq = T, show.string.values = T, verbose = F, show.id = F)
w02b <- w02 %>% filter(Intro==1, Finished==1) %>% as.data.frame()
w02b$Intro <- set_labels(w02b$Intro,  labels = c("I ACCEPT take part in this investigation", "I NOT ACCEPT take part in this investigation."))
w02_Introb <- w02b %>% select(Intro,Finished) %>% as.data.frame()
sjPlot::view_df(w0_Introb, show.type = T,show.frq = T, show.string.values = T, verbose = F, show.id = F)
sjPlot::view_df(w02_Introb, show.type = T,show.frq = T, show.string.values = T, verbose = F, show.id = F)
table(w03$Finished==1)
dim(w03b)
```{r}
save(dat01,file = "input/data/proc/dat01.RData")
save(dat02,file = "input/data/proc/dat02.RData")
save(dat03,file = "input/data/proc/dat03.RData")
save(dat04,file = "input/data/proc/dat04.RData")
```
save(dat01,file = "input/data/proc/dat01.RData")
save(dat02,file = "input/data/proc/dat02.RData")
save(dat03,file = "input/data/proc/dat03.RData")
rmarkdown::render(input = "production/prep-data-A.Rmd",output_format = "html_document",output_dir = ".")
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE,results = "hold")
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
library(sjPlot)
library(dplyr)
library(tidyr)
library(lavaan)
library(stargazer)
library(corrplot)
library(psych)
library(knitr)
library(kableExtra)
library(summarytools)
library(sjlabelled)
library(Hmisc)
w01 <- sjlabelled::read_spss("input/data/original/Estudio_3_ola1.sav",verbose = F)
dat04 <- w01 %>% filter(Intro==1) %>%
select(starts_with("meritv01"),
starts_with("meritv02"),
starts_with("meritv03_p"),
starts_with("FL_21_DO"))
dat04$grupo <- NA
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v01==1] <- 1
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v02==1] <- 2
dat04$grupo[dat04$FL_21_DO_merit_perc_pref_julio19v03==1] <- 3
dat04$perc_effort <- rowSums(dat04[,c(matches(match = "perc_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_talent <- rowSums(dat04[,c(matches(match = "perc_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$perc_wpart  <- rowSums(dat04[,c(matches(match = "perc_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$perc_netw   <- rowSums(dat04[,c(matches(match = "perc_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_effort <- rowSums(dat04[,c(matches(match = "pref_effort",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_talent <- rowSums(dat04[,c(matches(match = "pref_talent",vars = names(dat04)))],na.rm = TRUE)
dat04$pref_wpart  <- rowSums(dat04[,c(matches(match = "pref_wpart" ,vars = names(dat04)))],na.rm = TRUE)
dat04$pref_netw   <- rowSums(dat04[,c(matches(match = "pref_netw"  ,vars = names(dat04)))],na.rm = TRUE)
dat04[dat04==0] <- NA
label(dat04$grupo) <- "This variable classifies the interviewees according to the order in which the indicators are shown within the scale. There are three orders  of items on the scale. In the first order (group 1), questions of the same factor are then presented to them, in the second order (group 2) they were separated and in the third order (group 3) at random."
dat04$perc_effort <- set_labels(dat04$perc_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$perc_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they manage to get bigger
rewards that those who strive
less."
dat04$perc_talent <- set_labels(dat04$perc_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$perc_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they manage to obtain
greater rewards than those who possess
less talent."
dat04$perc_wpart <- set_labels(dat04$perc_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$perc_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have rich parents manage to get out
ahead."
dat04$perc_netw <- set_labels(dat04$perc_netw,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$perc_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
they have good contacts they manage to get out
ahead."
dat04$pref_effort <- set_labels(dat04$pref_effort,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$pref_effort) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
the more they try they should get
greater rewards than those who
they try less."
dat04$pref_talent <- set_labels(dat04$pref_talent,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$pref_talent) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Who
possess more talent they should get
greater rewards than those who possess
less talent."
dat04$pref_wpart <- set_labels(dat04$pref_wpart,  labels = c("strongly disagree" = 1, "disagreement" = 2, "Neither agree nor disagree"=3,"Agree"=4, "totally agree" = 5))
label(dat04$pref_wpart) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dat04$pref_netw <- set_labels(dat04$pref_netw,  labels = c("strongly disagree", "disagreement", "Neither agree nor disagree","Agree", "totally agree"))
label(dat04$pref_netw) <- "Thinking of Chilean society,
what measure do you find of
agree or disagree with each of
the following statements? - Is
well that those who have good
contacts get ahead."
dat04 <-  dat04 %>% select(grupo, perc_effort, perc_talent, perc_wpart, perc_netw, pref_effort, pref_talent, pref_wpart , pref_netw) %>% as.data.frame()
print(dfSummary(dat04, valid.col = FALSE, graph.magnif = 0.75),
max.tbl.height = 300, method = "render")
dat01 <- dat04 %>% filter(grupo==1) %>%  na.omit()
print(dfSummary(dat01, valid.col = FALSE, graph.magnif = 0.75),
max.tbl.height = 300, method = "render")
dat02 <- dat04 %>% filter(grupo==2) %>% select(perc_effort, pref_effort, perc_talent,pref_talent, perc_wpart,pref_wpart,  perc_netw, pref_netw) %>% na.omit()
dat03 <- dat04 %>% filter(grupo==3) %>%  na.omit()
save(dat01,file = "input/data/proc/dat01.RData")
save(dat02,file = "input/data/proc/dat02.RData")
save(dat03,file = "input/data/proc/dat03.RData")
save(dat04,file = "input/data/proc/dat04.RData")
