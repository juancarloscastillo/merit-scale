setwd("C:/Users/Anais/Downloads/meritocracy-preferences-master")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
setwd("C:/Users/Anais/Downloads/meritocracy-preferences-master")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")}
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
setwd("C:/Users/Anais/Downloads/meritocracy-preferences-master")
library(estimatr)
install.packages("estimatr")
library(estimatr)
install.packages("estimatr")
library(estimatr)
install.packages("estimatr")
install.packages("estimatr")
#install.packages("estimatr")
library(estimatr)
table_nums <- captioner(prefix = capTab(""),type = NULL)
fig_nums   <- captioner(prefix = capFig(""),type = NULL)
library(texreg)
table_nums <- captioner(prefix = capTab(""),type = NULL)
fig_nums   <- captioner(prefix = capFig(""),type = NULL)
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
setwd("C:/Users/Anais/Downloads/meritocracy-preferences-master")
setwd("C:/Users/Anais/Downloads/merit-scale-paper_cor")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
setwd("C:/Users/Anais/Downloads/merit-scale-paper_cor")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
# Chunk 1
# for render in pdf run rmarkdown::render_site("docs/paper.Rmd", output_format = "all")
# clean #in the yml
# Chunk 2: setup
knitr::opts_chunk$set(warning = FALSE,message = FALSE, cache = FALSE)
knitr::opts_knit$set(root.dir = "../")
options(scipen=999)
rm(list=ls())
options(knitr.kable.NA = '')
# Chunk 3
library(knitr)
#install.packages("KableExtra")
library(kableExtra)
library(dplyr)
#install.packages("captioner")
library(captioner)
#install.packages("estimatr")
library(estimatr)
library(texreg)
# Chunk 4
table_format = if(is_html_output()) {
"html"
} else if(is_latex_output()) {
"latex"
}
table_format2 = if(is_html_output()) {
T
} else if(is_latex_output()) {
F
}
# Chunk 5
table_nums <- captioner(prefix = "Table")
fig_nums   <- captioner(prefix = "Figure")
# Chunk 6
anx_nums<-captioner(prefix = "Annexed")
table_nums("ta", "Dimensions of meritocratic beliefs.")
table_nums("tb", "Items according to dimension.")
table_nums("tc", "Descriptive statistics of the scale.")
table_nums("td", "Factor loads and model fit.")
table_nums("te", "Comparison between model fit.")
plot_nums("fa", "Descriptive boxplot of the scale.")
plot_nums("fb", "Polychoric correlation.")
anx_nums("aa", "Representativeness of the sample.")
anx_nums<-captioner(prefix = "Annexed")
anx_nums("aa", "Representativeness of the sample.")
# Chunk 7
cap <- "Survey flow"
if (knitr::is_html_output()) {diam1 <- fig_nums("diam1",cap)} else {diam1 <- cap}
# Chunk 8
cap <- "Theorical model"
if (knitr::is_html_output()) {diam2 <- fig_nums("diam2",cap)} else {diam2 <- cap}
# Chunk 9
cap <- "Descriptive statistics of the scale."
if (knitr::is_html_output()) {tades <- table_nums("tades",cap)} else {tades <- cap}
# Chunk 10
load(file = "input/data/proc/dat04.RData")
dat04b<- dat04 %>% rename("Perception Effort" =perc_effort,
"Perception Talent" = perc_talent,
"Perception rich parents" = perc_wpart,
"Perception contacts" = perc_netw,
"Preferences Effort" = pref_effort,
"Preferences Talent" =  pref_talent,
"Preferences rich parents" =  pref_wpart ,
"Preferences contacts" = pref_netw  )
sum04b  <- psych::describe(dat04b[,-c(1)], fast = T) %>% select(mean,sd,min,max) %>% data.frame() %>% round(digits = 2)
table04b<- sum04b %>% rename("Mean"=mean, "SD"=sd, "Min"=min,"Max"=max)
cap01 <- "Descriptive statistic"
sumdat04<- kable(table04b, table_format, booktabs= T, escape = FALSE,align = "l",linesep = "", caption = cap01
) %>%
kable_styling(full_width = table_format2,font_size = 12,position = "center");sumdat04
# Chunk 11
cap <- "Descriptive plot"
if (knitr::is_html_output()) {liker <- fig_nums("liker",cap)} else {liker <- cap}
# Chunk 12
load(file = "output/images/correlation.RData")
library(corrplot)
corrplot(cor04$rho,method = "color", type = "upper", tl.col = "black", addCoef.col = "black",diag = FALSE)
# Chunk 13
cap <- "Factor loads and model fit."
if (knitr::is_html_output()) {loadfit <- table_nums("loadfit",cap)} else {loadfit <- cap}
# Chunk 14
load(file = "output/tables/tb.fm.RData")
tb.col  <- c("Variables",1:4,1:4,1:4)
tb.caption <- "Factor loadings and fit measures"
tb.foot <- paste0("; p<0.05=$*$; p<0.01=$**$; p<0.001=$***$. Standardised factor loadings using DWLS estimator. CFI = Comparative fit index (scaled), RMSEA = Root mean square error of approximation (scaled)")
tb.fm <- tb.fm %>%
mutate(vars = recode(vars,
"A. Who the more they try they manage to get bigger rewards that those who striveless."= "Perception Effort",
"B. Who possess more talent they manage to obtain greater rewards than those who possess less talent."= "Perception Talent",
"C. Who they have rich parents manage to get out ahead."="Perception rich parents",
"D. Who they have good contacts they manage to get out ahead."="Perception contacts",
"E. Who the more they try they should get greater rewards than those who they try less." = "Preferences Effort",
"F. Who possess more talent they should get greater rewards than those who possess less talent."= "Preferences Talent",
"G. It's fine that those who have rich parents get ahead" ="Preferences rich parents",
"H. Is well that those who have good contacts get ahead." = "Preferences contacts"))
tb.fm01<- kable(tb.fm, table_format, booktabs = T, escape = FALSE,align = "lcccccccccccc",col.names = tb.col, caption = tb.caption) %>%
kable_styling(position = "center", full_width = table_format2,font_size = 9) %>%
add_header_above(header = c(" "=1,"Version 1"= 4,"Version 2"= 4,"Version 3"= 4)) %>%
add_header_above(header = c(" "=1,"Factor loadings"= 12)) %>%
row_spec(row = 8,hline_after = TRUE) %>%
add_indent(c(9:12))
tb.fm2<-as.data.frame(tb.fm[1:8,])
tb.fm02<- kable(tb.fm2, table_format, booktabs = T, escape = FALSE,align = "lcccccccccccc", col.names = tb.col, caption = tb.caption) %>%
kable_styling(position = "center", full_width = table_format2,font_size = 11) %>%
add_header_above(header = c(" "=1,"Version 1"= 4,"Version 2"= 4,"Version 3"= 4)) %>%
add_header_above(header = c(" "=1,"Factor loadings"= 12)) %>%
row_spec(row = 8,hline_after = )
tb.fm01
tb.fm02
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
table_nums("tb", "Items according to dimension.")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
source('C:/Users/Anais/Downloads/merit-scale-paper_cor/render-site.R', echo=TRUE)
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
rmarkdown::render_site("docs/paper.Rmd", output_format = "pdf_document")
source('C:/Users/Anais/Downloads/merit-scale-paper_cor/render-site.R', echo=TRUE)
